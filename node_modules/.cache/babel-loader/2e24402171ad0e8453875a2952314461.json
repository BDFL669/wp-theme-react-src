{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\admi\\\\Documents\\\\Xampp\\\\htdocs\\\\wordpress\\\\wp-content\\\\themes\\\\bare-bones\\\\react-src\\\\src\\\\context\\\\Context.js\";\nimport React, { useState, useEffect } from 'react';\nimport Axios from 'axios';\nimport { useParams } from 'react-router-dom';\nconst storeContext = React.createContext();\nexport const Consumer = storeContext.Consumer;\naxios.defaults.baseURL = 'http://localhost/wordpress/';\nexport const Provider = props => {\n  const params = useParams();\n  const [term, setTerm] = useState('');\n  const [slug, setSlug] = useState('');\n  const [restType, setRestType] = useState('');\n  const [catid, setCatid] = useState('');\n  const [route, setRoute] = useState('');\n  const [posts, setPosts] = useState([]);\n  const [comments, setComments] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(0);\n  const [commentFields, setCommentFields] = useState({\n    fullName: '',\n    email: '',\n    website: '',\n    comment: ''\n  });\n  const [appError, setAppError] = useState('');\n  const [commentErrors, setCommentErrors] = useState([]);\n  useEffect(() => {\n    setRestType(getRestType(params.path));\n    setRoute(params.path);\n    setSlug(params.slug ? params.slug : '');\n    setTerm(params.term ? params.term : '');\n    setCatid(params.catid ? params.catid : '');\n  }, [params]);\n  useEffect(() => {\n    getPosts(buildUrl());\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [restType, currentPage, catid]);\n  const getRestType = path => {\n    let restType = 'post';\n    switch (path) {\n      case '/page/:slug':\n        restType = 'page';\n        break;\n      case '/search/:term':\n        restType = 'search';\n        break;\n      case '/category/:catid':\n        restType = 'category';\n        break;\n      case '/post/:slug':\n      default:\n        restType = 'post';\n        break;\n    }\n    return restType;\n  };\n  const updateTerm = term => {\n    setTerm(term);\n  };\n  const updateCommentErrors = errors => {\n    setCommentErrors(errors);\n  };\n  const submitSearch = () => {\n    setRestType('search');\n    setCurrentPage(1);\n    props.router.history.push('/search/' + term);\n  };\n  const updateCommentFields = (key, val) => {\n    setCommentFields(prevFields => ({\n      ...prevFields,\n      [key]: val\n    }));\n  };\n  const submitComment = () => {\n    const postdata = {\n      post: posts[0].id,\n      author_name: commentFields.fullName,\n      author_email: commentFields.email,\n      author_url: commentFields.website,\n      content: commentFields.comment\n    };\n    Axios.post('/wordpress/wp-json/wp/v2/comments', postdata).then(response => {\n      const cmnt = response.data;\n      cmnt.waiting = 'Your comment is waiting approval';\n      setComments(prevComments => [...prevComments, cmnt]);\n    }).catch(error => {\n      const err = [];\n      err.push(error.message);\n      setCommentErrors(err);\n    });\n  };\n  const buildUrl = () => {\n    let url = '/wp-json/wp/v2/';\n    switch (restType) {\n      case 'page':\n        url += 'pages/?slug=';\n        url += slug;\n        break;\n      case 'search':\n        url += 'search/?s=';\n        url += term;\n        url += '&page=' + currentPage;\n        break;\n      case 'category':\n        url += 'posts?categories=';\n        url += catid;\n        url += '&page=' + currentPage;\n        break;\n      case 'post':\n      default:\n        url += slug ? 'posts/?slug=' + slug : 'posts/?page=' + currentPage;\n        break;\n    }\n    return url;\n  };\n  const getComments = id => {\n    const url = '/wordpress/wp-json/wp/v2/comments?post=' + id;\n    Axios.get(url).then(response => {\n      setComments(response.data);\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n  const getPosts = url => {\n    Axios.get(url).then(response => {\n      setPosts(response.data);\n      setTotalPages(response.headers['x-wp-totalpages']);\n      if (route === '/post/:slug' && response.data[0]) {\n        getComments(response.data[0].id);\n      }\n    }).catch(error => {\n      console.log(error);\n      setAppError('An unexpected error occurred');\n    });\n  };\n  const nextClicked = () => {\n    setCurrentPage(prevPage => prevPage + 1);\n  };\n  const previousClicked = () => {\n    setCurrentPage(prevPage => prevPage - 1);\n  };\n  return /*#__PURE__*/React.createElement(storeContext.Provider, {\n    value: {\n      term,\n      slug,\n      restType,\n      catid,\n      route,\n      posts,\n      comments,\n      currentPage,\n      totalPages,\n      commentFields,\n      appError,\n      commentErrors,\n      nextClicked,\n      previousClicked,\n      submitSearch,\n      updateTerm,\n      submitComment,\n      updateCommentFields,\n      updateCommentErrors\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 5\n    }\n  }, props.children);\n};","map":{"version":3,"names":["React","useState","useEffect","Axios","useParams","storeContext","createContext","Consumer","axios","defaults","baseURL","Provider","props","params","term","setTerm","slug","setSlug","restType","setRestType","catid","setCatid","route","setRoute","posts","setPosts","comments","setComments","currentPage","setCurrentPage","totalPages","setTotalPages","commentFields","setCommentFields","fullName","email","website","comment","appError","setAppError","commentErrors","setCommentErrors","getRestType","path","getPosts","buildUrl","updateTerm","updateCommentErrors","errors","submitSearch","router","history","push","updateCommentFields","key","val","prevFields","submitComment","postdata","post","id","author_name","author_email","author_url","content","then","response","cmnt","data","waiting","prevComments","catch","error","err","message","url","getComments","get","console","log","headers","nextClicked","prevPage","previousClicked","createElement","value","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","children"],"sources":["C:/Users/admi/Documents/Xampp/htdocs/wordpress/wp-content/themes/bare-bones/react-src/src/context/Context.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Axios from 'axios';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nconst storeContext = React.createContext();\r\nexport const Consumer = storeContext.Consumer;\r\naxios.defaults.baseURL = 'http://localhost/wordpress/';\r\n\r\nexport const Provider = (props) => {\r\n  const params = useParams();\r\n\r\n  const [term, setTerm] = useState('');\r\n  const [slug, setSlug] = useState('');\r\n  const [restType, setRestType] = useState('');\r\n  const [catid, setCatid] = useState('');\r\n  const [route, setRoute] = useState('');\r\n  const [posts, setPosts] = useState([]);\r\n  const [comments, setComments] = useState([]);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(0);\r\n  const [commentFields, setCommentFields] = useState({\r\n    fullName: '',\r\n    email: '',\r\n    website: '',\r\n    comment: ''\r\n  });\r\n  const [appError, setAppError] = useState('');\r\n  const [commentErrors, setCommentErrors] = useState([]);\r\n\r\n  useEffect(() => {\r\n    setRestType(getRestType(params.path));\r\n    setRoute(params.path);\r\n    setSlug(params.slug ? params.slug : '');\r\n    setTerm(params.term ? params.term : '');\r\n    setCatid(params.catid ? params.catid : '');\r\n  }, [params]);\r\n\r\n  useEffect(() => {\r\n    getPosts(buildUrl());\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [restType, currentPage, catid]);\r\n\r\n  const getRestType = (path) => {\r\n    let restType = 'post';\r\n    switch (path) {\r\n      case '/page/:slug':\r\n        restType = 'page';\r\n        break;\r\n      case '/search/:term':\r\n        restType = 'search';\r\n        break;\r\n      case '/category/:catid':\r\n        restType = 'category';\r\n        break;\r\n      case '/post/:slug':\r\n      default:\r\n        restType = 'post';\r\n        break;\r\n    }\r\n    return restType;\r\n  };\r\n\r\n  const updateTerm = (term) => {\r\n    setTerm(term);\r\n  };\r\n\r\n  const updateCommentErrors = (errors) => {\r\n    setCommentErrors(errors);\r\n  };\r\n\r\n  const submitSearch = () => {\r\n    setRestType('search');\r\n    setCurrentPage(1);\r\n    props.router.history.push('/search/' + term);\r\n  };\r\n\r\n  const updateCommentFields = (key, val) => {\r\n    setCommentFields((prevFields) => ({\r\n      ...prevFields,\r\n      [key]: val\r\n    }));\r\n  };\r\n\r\n  const submitComment = () => {\r\n    const postdata = {\r\n      post: posts[0].id,\r\n      author_name: commentFields.fullName,\r\n      author_email: commentFields.email,\r\n      author_url: commentFields.website,\r\n      content: commentFields.comment\r\n    };\r\n\r\n    Axios.post('/wordpress/wp-json/wp/v2/comments', postdata)\r\n      .then((response) => {\r\n        const cmnt = response.data;\r\n        cmnt.waiting = 'Your comment is waiting approval';\r\n        setComments((prevComments) => [...prevComments, cmnt]);\r\n      })\r\n      .catch((error) => {\r\n        const err = [];\r\n        err.push(error.message);\r\n        setCommentErrors(err);\r\n      });\r\n  };\r\n\r\n  const buildUrl = () => {\r\n    let url = '/wp-json/wp/v2/';\r\n    switch (restType) {\r\n      case 'page':\r\n        url += 'pages/?slug=';\r\n        url += slug;\r\n        break;\r\n      case 'search':\r\n        url += 'search/?s=';\r\n        url += term;\r\n        url += '&page=' + currentPage;\r\n        break;\r\n      case 'category':\r\n        url += 'posts?categories=';\r\n        url += catid;\r\n        url += '&page=' + currentPage;\r\n        break;\r\n      case 'post':\r\n      default:\r\n        url += slug ? 'posts/?slug=' + slug : 'posts/?page=' + currentPage;\r\n        break;\r\n    }\r\n\r\n    return url;\r\n  };\r\n\r\n  const getComments = (id) => {\r\n    const url = '/wordpress/wp-json/wp/v2/comments?post=' + id;\r\n    Axios.get(url)\r\n      .then((response) => {\r\n        setComments(response.data);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  const getPosts = (url) => {\r\n    Axios.get(url)\r\n      .then((response) => {\r\n        setPosts(response.data);\r\n        setTotalPages(response.headers['x-wp-totalpages']);\r\n        if (route === '/post/:slug' && response.data[0]) {\r\n          getComments(response.data[0].id);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        setAppError('An unexpected error occurred');\r\n      });\r\n  };\r\n\r\n  const nextClicked = () => {\r\n    setCurrentPage((prevPage) => prevPage + 1);\r\n  };\r\n\r\n  const previousClicked = () => {\r\n    setCurrentPage((prevPage) => prevPage - 1);\r\n  };\r\n\r\n  return (\r\n    <storeContext.Provider\r\n      value={{\r\n        term,\r\n        slug,\r\n        restType,\r\n        catid,\r\n        route,\r\n        posts,\r\n        comments,\r\n        currentPage,\r\n        totalPages,\r\n        commentFields,\r\n        appError,\r\n        commentErrors,\r\n        nextClicked,\r\n        previousClicked,\r\n        submitSearch,\r\n        updateTerm,\r\n        submitComment,\r\n        updateCommentFields,\r\n        updateCommentErrors\r\n      }}\r\n    >\r\n      {props.children}\r\n    </storeContext.Provider>\r\n  );\r\n};\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}