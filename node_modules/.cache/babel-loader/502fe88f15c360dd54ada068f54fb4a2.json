{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\admi\\\\Documents\\\\Xampp\\\\htdocs\\\\wordpress\\\\wp-content\\\\themes\\\\bare-bones\\\\react-src\\\\src\\\\context\\\\Context.js\";\nimport React from \"react\";\nimport Axios from \"axios\";\nimport { useParams } from \"react-router-dom\";\nimport { useState, useEffect } from 'react';\n\n//context api:  \n//https://medium.com/datadriveninvestor/getting-started-w-reacts-context-api-f60aa9be758f\n\nconst storeContext = React.createContext();\nconst routeParams = useParams();\nexport const Consumer = storeContext.Consumer;\nexport const Provider = props => {\n  const [term, setTerm] = useState('');\n  const [slug, setSlug] = useState('');\n  const [restType, setRestType] = useState('post');\n  const [catid, setCatid] = useState('');\n  const [route, setRoute] = useState('');\n  const [posts, setPosts] = useState([]);\n  const [comments, setComments] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(0);\n  const [commentFields, setCommentFields] = useState({\n    fullName: '',\n    email: '',\n    website: '',\n    comment: ''\n  });\n  const [appError, setAppError] = useState('');\n  const [commentErrors, setCommentErrors] = useState([]);\n  const getRestType = path => {\n    let restType = 'post';\n    switch (path) {\n      case '/page/:slug':\n        restType = 'page';\n        break;\n      case '/search/:term':\n        restType = 'search';\n        break;\n      case '/category/:catid':\n        restType = 'category';\n        break;\n      case '/post/:slug':\n      default:\n        restType = 'post';\n        break;\n    }\n    return restType;\n  };\n  useEffect(() => {\n    getPosts(buildUrl());\n  }, []);\n  useEffect(prevProps => {\n    if (prevProps.router.location.pathname !== props.router.location.pathname) {\n      const curProps = props.router.match;\n      setCurrentPage(1);\n      setRestType(getRestType(curProps.path));\n      setCatid(curProps.params.catid ? curProps.params.catid : '');\n      getPosts(buildUrl());\n    }\n  }, [props.router.location.pathname]);\n  const updateTerm = term => {\n    setTerm(term);\n  };\n  const updateCommentErrors = errors => {\n    setCommentErrors(errors);\n  };\n  const submitSearch = () => {\n    setRestType('search');\n    setCurrentPage(1);\n    props.router.history.push('/search/' + term);\n  };\n  const updateCommentFields = (key, val) => {\n    setCommentFields(prevCommentFields => ({\n      ...prevCommentFields,\n      [key]: val\n    }));\n  };\n  const submitComment = () => {\n    const postdata = {\n      post: posts[0].id,\n      author_name: commentFields.fullName,\n      author_email: commentFields.email,\n      author_url: commentFields.website,\n      content: commentFields.comment\n    };\n    Axios.post('/wp-json/wp/v2/comments', postdata).then(response => {\n      const cmnt = response.data;\n      cmnt.waiting = 'Your comment is waiting approval';\n      setComments(prevComments => [...prevComments, cmnt]);\n    }).catch(function (error) {\n      const err = [error.message];\n      setCommentErrors(err);\n    });\n  };\n  const buildUrl = () => {\n    let url = '/wp-json/wp/v2/';\n    switch (restType) {\n      case 'page':\n        url += 'pages/?slug=';\n        url += slug;\n        break;\n      case 'search':\n        url += 'search/?s=';\n        url += term;\n        url += '&page=' + currentPage;\n        break;\n      case 'category':\n        url += 'posts?categories=';\n        url += catid;\n        url += '&page=' + currentPage;\n        break;\n      case 'post':\n      default:\n        url += slug ? 'posts/?slug=' + slug : 'posts/?page=' + currentPage;\n        break;\n    }\n    return url;\n  };\n  const getComments = id => {\n    const url = '/wp-json/wp/v2/comments?post=' + id;\n    Axios.get(url).then(response => {\n      setComments(response.data);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n  const getPosts = url => {\n    Axios.get(url).then(response => {\n      setPosts(response.data);\n      setTotalPages(response.headers['x-wp-totalpages']);\n      if (route === '/post/:slug' && response.data[0]) {\n        getComments(response.data[0].id);\n      }\n    }).catch(function (error) {\n      console.log(error);\n      setAppError('An unexpected error occurred');\n    });\n  };\n  const nextClicked = () => {\n    const newPage = currentPage + 1;\n    setCurrentPage(newPage);\n    getPosts(buildUrl());\n  };\n  const previousClicked = () => {\n    const newPage = currentPage - 1;\n    setCurrentPage(newPage);\n    getPosts(buildUrl());\n  };\n  return /*#__PURE__*/React.createElement(storeContext.Provider, {\n    value: {\n      term,\n      slug,\n      restType,\n      catid,\n      route,\n      posts,\n      comments,\n      currentPage,\n      totalPages,\n      commentFields,\n      appError,\n      commentErrors,\n      nextClicked,\n      previousClicked,\n      submitSearch,\n      updateTerm,\n      submitComment,\n      updateCommentFields,\n      updateCommentErrors\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 5\n    }\n  }, props.children);\n};","map":{"version":3,"names":["React","Axios","useParams","useState","useEffect","storeContext","createContext","routeParams","Consumer","Provider","props","term","setTerm","slug","setSlug","restType","setRestType","catid","setCatid","route","setRoute","posts","setPosts","comments","setComments","currentPage","setCurrentPage","totalPages","setTotalPages","commentFields","setCommentFields","fullName","email","website","comment","appError","setAppError","commentErrors","setCommentErrors","getRestType","path","getPosts","buildUrl","prevProps","router","location","pathname","curProps","match","params","updateTerm","updateCommentErrors","errors","submitSearch","history","push","updateCommentFields","key","val","prevCommentFields","submitComment","postdata","post","id","author_name","author_email","author_url","content","then","response","cmnt","data","waiting","prevComments","catch","error","err","message","url","getComments","get","console","log","headers","nextClicked","newPage","previousClicked","createElement","value","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","children"],"sources":["C:/Users/admi/Documents/Xampp/htdocs/wordpress/wp-content/themes/bare-bones/react-src/src/context/Context.js"],"sourcesContent":["import React from \"react\";\r\nimport Axios from \"axios\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useState, useEffect } from 'react';\r\n\r\n//context api:  \r\n//https://medium.com/datadriveninvestor/getting-started-w-reacts-context-api-f60aa9be758f\r\n\r\nconst storeContext = React.createContext();\r\nconst routeParams = useParams();\r\nexport const Consumer = storeContext.Consumer;\r\n\r\nexport const Provider = (props) => {\r\n  const [term, setTerm] = useState('');\r\n  const [slug, setSlug] = useState('');\r\n  const [restType, setRestType] = useState('post');\r\n  const [catid, setCatid] = useState('');\r\n  const [route, setRoute] = useState('');\r\n  const [posts, setPosts] = useState([]);\r\n  const [comments, setComments] = useState([]);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(0);\r\n  const [commentFields, setCommentFields] = useState({\r\n    fullName: '',\r\n    email: '',\r\n    website: '',\r\n    comment: '',\r\n  });\r\n  const [appError, setAppError] = useState('');\r\n  const [commentErrors, setCommentErrors] = useState([]);\r\n\r\n  const getRestType = (path) => {\r\n    let restType = 'post';\r\n    switch (path) {\r\n      case '/page/:slug':\r\n        restType = 'page';\r\n        break;\r\n      case '/search/:term':\r\n        restType = 'search';\r\n        break;\r\n      case '/category/:catid':\r\n        restType = 'category';\r\n        break;\r\n      case '/post/:slug':\r\n      default:\r\n        restType = 'post';\r\n        break;\r\n    }\r\n    return restType;\r\n  };\r\n\r\n  useEffect(() => {\r\n    getPosts(buildUrl());\r\n  }, []);\r\n\r\n  useEffect((prevProps) => {\r\n    if (prevProps.router.location.pathname !== props.router.location.pathname) {\r\n      const curProps = props.router.match;\r\n      setCurrentPage(1);\r\n      setRestType(getRestType(curProps.path));\r\n      setCatid(curProps.params.catid ? curProps.params.catid : '');\r\n      getPosts(buildUrl());\r\n    }\r\n  }, [props.router.location.pathname]);\r\n\r\n  const updateTerm = (term) => {\r\n    setTerm(term);\r\n  };\r\n\r\n  const updateCommentErrors = (errors) => {\r\n    setCommentErrors(errors);\r\n  };\r\n\r\n  const submitSearch = () => {\r\n    setRestType('search');\r\n    setCurrentPage(1);\r\n    props.router.history.push('/search/' + term);\r\n  };\r\n\r\n  const updateCommentFields = (key, val) => {\r\n    setCommentFields((prevCommentFields) => ({\r\n      ...prevCommentFields,\r\n      [key]: val,\r\n    }));\r\n  };\r\n\r\n  const submitComment = () => {\r\n    const postdata = {\r\n      post: posts[0].id,\r\n      author_name: commentFields.fullName,\r\n      author_email: commentFields.email,\r\n      author_url: commentFields.website,\r\n      content: commentFields.comment,\r\n    };\r\n\r\n    Axios.post('/wp-json/wp/v2/comments', postdata)\r\n      .then((response) => {\r\n        const cmnt = response.data;\r\n        cmnt.waiting = 'Your comment is waiting approval';\r\n        setComments((prevComments) => [...prevComments, cmnt]);\r\n      })\r\n      .catch(function (error) {\r\n        const err = [error.message];\r\n        setCommentErrors(err);\r\n      });\r\n  };\r\n\r\n  const buildUrl = () => {\r\n    let url = '/wp-json/wp/v2/';\r\n    switch (restType) {\r\n      case 'page':\r\n        url += 'pages/?slug=';\r\n        url += slug;\r\n        break;\r\n      case 'search':\r\n        url += 'search/?s=';\r\n        url += term;\r\n        url += '&page=' + currentPage;\r\n        break;\r\n      case 'category':\r\n        url += 'posts?categories=';\r\n        url += catid;\r\n        url += '&page=' + currentPage;\r\n        break;\r\n      case 'post':\r\n      default:\r\n        url += slug ? 'posts/?slug=' + slug : 'posts/?page=' + currentPage;\r\n        break;\r\n    }\r\n\r\n    return url;\r\n  };\r\n\r\n  const getComments = (id) => {\r\n    const url = '/wp-json/wp/v2/comments?post=' + id;\r\n    Axios.get(url)\r\n      .then((response) => {\r\n        setComments(response.data);\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  const getPosts = (url) => {\r\n    Axios.get(url)\r\n      .then((response) => {\r\n        setPosts(response.data);\r\n        setTotalPages(response.headers['x-wp-totalpages']);\r\n\r\n        if (route === '/post/:slug' && response.data[0]) {\r\n          getComments(response.data[0].id);\r\n        }\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n        setAppError('An unexpected error occurred');\r\n      });\r\n  };\r\n\r\n  const nextClicked = () => {\r\n    const newPage = currentPage + 1;\r\n    setCurrentPage(newPage);\r\n    getPosts(buildUrl());\r\n  };\r\n\r\n  const previousClicked = () => {\r\n    const newPage = currentPage - 1;\r\n    setCurrentPage(newPage);\r\n    getPosts(buildUrl());\r\n  };\r\n\r\n  return (\r\n    <storeContext.Provider\r\n      value={{\r\n        term,\r\n        slug,\r\n        restType,\r\n        catid,\r\n        route,\r\n        posts,\r\n        comments,\r\n        currentPage,\r\n        totalPages,\r\n        commentFields,\r\n        appError,\r\n        commentErrors,\r\n        nextClicked,\r\n        previousClicked,\r\n        submitSearch,\r\n        updateTerm,\r\n        submitComment,\r\n        updateCommentFields,\r\n        updateCommentErrors,\r\n      }}\r\n    >\r\n      {props.children}\r\n    </storeContext.Provider>\r\n  );\r\n};"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,QAAQ,kBAAkB;AAC5C,SAASC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;;AAE3C;AACA;;AAEA,MAAMC,YAAY,GAAGL,KAAK,CAACM,aAAa,CAAC,CAAC;AAC1C,MAAMC,WAAW,GAAGL,SAAS,CAAC,CAAC;AAC/B,OAAO,MAAMM,QAAQ,GAAGH,YAAY,CAACG,QAAQ;AAE7C,OAAO,MAAMC,QAAQ,GAAIC,KAAK,IAAK;EACjC,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACU,IAAI,EAAEC,OAAO,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACY,QAAQ,EAAEC,WAAW,CAAC,GAAGb,QAAQ,CAAC,MAAM,CAAC;EAChD,MAAM,CAACc,KAAK,EAAEC,QAAQ,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACgB,KAAK,EAAEC,QAAQ,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACkB,KAAK,EAAEC,QAAQ,CAAC,GAAGnB,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACoB,QAAQ,EAAEC,WAAW,CAAC,GAAGrB,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACsB,WAAW,EAAEC,cAAc,CAAC,GAAGvB,QAAQ,CAAC,CAAC,CAAC;EACjD,MAAM,CAACwB,UAAU,EAAEC,aAAa,CAAC,GAAGzB,QAAQ,CAAC,CAAC,CAAC;EAC/C,MAAM,CAAC0B,aAAa,EAAEC,gBAAgB,CAAC,GAAG3B,QAAQ,CAAC;IACjD4B,QAAQ,EAAE,EAAE;IACZC,KAAK,EAAE,EAAE;IACTC,OAAO,EAAE,EAAE;IACXC,OAAO,EAAE;EACX,CAAC,CAAC;EACF,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGjC,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACkC,aAAa,EAAEC,gBAAgB,CAAC,GAAGnC,QAAQ,CAAC,EAAE,CAAC;EAEtD,MAAMoC,WAAW,GAAIC,IAAI,IAAK;IAC5B,IAAIzB,QAAQ,GAAG,MAAM;IACrB,QAAQyB,IAAI;MACV,KAAK,aAAa;QAChBzB,QAAQ,GAAG,MAAM;QACjB;MACF,KAAK,eAAe;QAClBA,QAAQ,GAAG,QAAQ;QACnB;MACF,KAAK,kBAAkB;QACrBA,QAAQ,GAAG,UAAU;QACrB;MACF,KAAK,aAAa;MAClB;QACEA,QAAQ,GAAG,MAAM;QACjB;IACJ;IACA,OAAOA,QAAQ;EACjB,CAAC;EAEDX,SAAS,CAAC,MAAM;IACdqC,QAAQ,CAACC,QAAQ,CAAC,CAAC,CAAC;EACtB,CAAC,EAAE,EAAE,CAAC;EAENtC,SAAS,CAAEuC,SAAS,IAAK;IACvB,IAAIA,SAAS,CAACC,MAAM,CAACC,QAAQ,CAACC,QAAQ,KAAKpC,KAAK,CAACkC,MAAM,CAACC,QAAQ,CAACC,QAAQ,EAAE;MACzE,MAAMC,QAAQ,GAAGrC,KAAK,CAACkC,MAAM,CAACI,KAAK;MACnCtB,cAAc,CAAC,CAAC,CAAC;MACjBV,WAAW,CAACuB,WAAW,CAACQ,QAAQ,CAACP,IAAI,CAAC,CAAC;MACvCtB,QAAQ,CAAC6B,QAAQ,CAACE,MAAM,CAAChC,KAAK,GAAG8B,QAAQ,CAACE,MAAM,CAAChC,KAAK,GAAG,EAAE,CAAC;MAC5DwB,QAAQ,CAACC,QAAQ,CAAC,CAAC,CAAC;IACtB;EACF,CAAC,EAAE,CAAChC,KAAK,CAACkC,MAAM,CAACC,QAAQ,CAACC,QAAQ,CAAC,CAAC;EAEpC,MAAMI,UAAU,GAAIvC,IAAI,IAAK;IAC3BC,OAAO,CAACD,IAAI,CAAC;EACf,CAAC;EAED,MAAMwC,mBAAmB,GAAIC,MAAM,IAAK;IACtCd,gBAAgB,CAACc,MAAM,CAAC;EAC1B,CAAC;EAED,MAAMC,YAAY,GAAGA,CAAA,KAAM;IACzBrC,WAAW,CAAC,QAAQ,CAAC;IACrBU,cAAc,CAAC,CAAC,CAAC;IACjBhB,KAAK,CAACkC,MAAM,CAACU,OAAO,CAACC,IAAI,CAAC,UAAU,GAAG5C,IAAI,CAAC;EAC9C,CAAC;EAED,MAAM6C,mBAAmB,GAAGA,CAACC,GAAG,EAAEC,GAAG,KAAK;IACxC5B,gBAAgB,CAAE6B,iBAAiB,KAAM;MACvC,GAAGA,iBAAiB;MACpB,CAACF,GAAG,GAAGC;IACT,CAAC,CAAC,CAAC;EACL,CAAC;EAED,MAAME,aAAa,GAAGA,CAAA,KAAM;IAC1B,MAAMC,QAAQ,GAAG;MACfC,IAAI,EAAEzC,KAAK,CAAC,CAAC,CAAC,CAAC0C,EAAE;MACjBC,WAAW,EAAEnC,aAAa,CAACE,QAAQ;MACnCkC,YAAY,EAAEpC,aAAa,CAACG,KAAK;MACjCkC,UAAU,EAAErC,aAAa,CAACI,OAAO;MACjCkC,OAAO,EAAEtC,aAAa,CAACK;IACzB,CAAC;IAEDjC,KAAK,CAAC6D,IAAI,CAAC,yBAAyB,EAAED,QAAQ,CAAC,CAC5CO,IAAI,CAAEC,QAAQ,IAAK;MAClB,MAAMC,IAAI,GAAGD,QAAQ,CAACE,IAAI;MAC1BD,IAAI,CAACE,OAAO,GAAG,kCAAkC;MACjDhD,WAAW,CAAEiD,YAAY,IAAK,CAAC,GAAGA,YAAY,EAAEH,IAAI,CAAC,CAAC;IACxD,CAAC,CAAC,CACDI,KAAK,CAAC,UAAUC,KAAK,EAAE;MACtB,MAAMC,GAAG,GAAG,CAACD,KAAK,CAACE,OAAO,CAAC;MAC3BvC,gBAAgB,CAACsC,GAAG,CAAC;IACvB,CAAC,CAAC;EACN,CAAC;EAED,MAAMlC,QAAQ,GAAGA,CAAA,KAAM;IACrB,IAAIoC,GAAG,GAAG,iBAAiB;IAC3B,QAAQ/D,QAAQ;MACd,KAAK,MAAM;QACT+D,GAAG,IAAI,cAAc;QACrBA,GAAG,IAAIjE,IAAI;QACX;MACF,KAAK,QAAQ;QACXiE,GAAG,IAAI,YAAY;QACnBA,GAAG,IAAInE,IAAI;QACXmE,GAAG,IAAI,QAAQ,GAAGrD,WAAW;QAC7B;MACF,KAAK,UAAU;QACbqD,GAAG,IAAI,mBAAmB;QAC1BA,GAAG,IAAI7D,KAAK;QACZ6D,GAAG,IAAI,QAAQ,GAAGrD,WAAW;QAC7B;MACF,KAAK,MAAM;MACX;QACEqD,GAAG,IAAIjE,IAAI,GAAG,cAAc,GAAGA,IAAI,GAAG,cAAc,GAAGY,WAAW;QAClE;IACJ;IAEA,OAAOqD,GAAG;EACZ,CAAC;EAED,MAAMC,WAAW,GAAIhB,EAAE,IAAK;IAC1B,MAAMe,GAAG,GAAG,+BAA+B,GAAGf,EAAE;IAChD9D,KAAK,CAAC+E,GAAG,CAACF,GAAG,CAAC,CACXV,IAAI,CAAEC,QAAQ,IAAK;MAClB7C,WAAW,CAAC6C,QAAQ,CAACE,IAAI,CAAC;IAC5B,CAAC,CAAC,CACDG,KAAK,CAAC,UAAUC,KAAK,EAAE;MACtBM,OAAO,CAACC,GAAG,CAACP,KAAK,CAAC;IACpB,CAAC,CAAC;EACN,CAAC;EAED,MAAMlC,QAAQ,GAAIqC,GAAG,IAAK;IACxB7E,KAAK,CAAC+E,GAAG,CAACF,GAAG,CAAC,CACXV,IAAI,CAAEC,QAAQ,IAAK;MAClB/C,QAAQ,CAAC+C,QAAQ,CAACE,IAAI,CAAC;MACvB3C,aAAa,CAACyC,QAAQ,CAACc,OAAO,CAAC,iBAAiB,CAAC,CAAC;MAElD,IAAIhE,KAAK,KAAK,aAAa,IAAIkD,QAAQ,CAACE,IAAI,CAAC,CAAC,CAAC,EAAE;QAC/CQ,WAAW,CAACV,QAAQ,CAACE,IAAI,CAAC,CAAC,CAAC,CAACR,EAAE,CAAC;MAClC;IACF,CAAC,CAAC,CACDW,KAAK,CAAC,UAAUC,KAAK,EAAE;MACtBM,OAAO,CAACC,GAAG,CAACP,KAAK,CAAC;MAClBvC,WAAW,CAAC,8BAA8B,CAAC;IAC7C,CAAC,CAAC;EACN,CAAC;EAED,MAAMgD,WAAW,GAAGA,CAAA,KAAM;IACxB,MAAMC,OAAO,GAAG5D,WAAW,GAAG,CAAC;IAC/BC,cAAc,CAAC2D,OAAO,CAAC;IACvB5C,QAAQ,CAACC,QAAQ,CAAC,CAAC,CAAC;EACtB,CAAC;EAED,MAAM4C,eAAe,GAAGA,CAAA,KAAM;IAC5B,MAAMD,OAAO,GAAG5D,WAAW,GAAG,CAAC;IAC/BC,cAAc,CAAC2D,OAAO,CAAC;IACvB5C,QAAQ,CAACC,QAAQ,CAAC,CAAC,CAAC;EACtB,CAAC;EAED,oBACE1C,KAAA,CAAAuF,aAAA,CAAClF,YAAY,CAACI,QAAQ;IACpB+E,KAAK,EAAE;MACL7E,IAAI;MACJE,IAAI;MACJE,QAAQ;MACRE,KAAK;MACLE,KAAK;MACLE,KAAK;MACLE,QAAQ;MACRE,WAAW;MACXE,UAAU;MACVE,aAAa;MACbM,QAAQ;MACRE,aAAa;MACb+C,WAAW;MACXE,eAAe;MACfjC,YAAY;MACZH,UAAU;MACVU,aAAa;MACbJ,mBAAmB;MACnBL;IACF,CAAE;IAAAsC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAEDpF,KAAK,CAACqF,QACc,CAAC;AAE5B,CAAC"},"metadata":{},"sourceType":"module"}